class Solution {
    public int scoreOfParentheses(String s) {
        Stack<Integer> st = new Stack<>();
        int n = s.length();
        st.push(0); // intially we starting with the 0 score 
        for(int i=0;i<n;i++){
            if(s.charAt(i) == '('){
                st.push(0);
            }else{
                int v = st.pop();  // it is the most recent open breacket 
                int top = st.pop(); // we are accessing it because we need to the cur score 
                int nS = top+Math.max(2*v, 1); // we updating the score to the stack here with prev and max of recent one if it is nested()2*v if not adding 1. 
                st.push(nS);
            }
        }
        return st.pop();
    }
}
